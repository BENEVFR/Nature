<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>FAQ • nature</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="FAQ">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">nature</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.10</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/create_new_report.html">Créer une enquête pour une nouvelle ville</a></li>
    <li><a class="dropdown-item" href="../articles/create_new_versioning_folder.html">Créer et versionner un dossier avec Github</a></li>
    <li><a class="dropdown-item" href="../articles/exploration.html">Data exploration</a></li>
    <li><a class="dropdown-item" href="../articles/faq.html">FAQ</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>FAQ</h1>
            
      

      <div class="d-none name"><code>faq.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="comment-modifier-le-texte-présent-dans-la-pop-up-au-moment-de-collecter-les-données">Comment modifier le texte présent dans la pop-up au moment de
collecter les données ?<a class="anchor" aria-label="anchor" href="#comment-modifier-le-texte-pr%C3%A9sent-dans-la-pop-up-au-moment-de-collecter-les-donn%C3%A9es"></a>
</h2>
<p>Avant de collecter les données des répondants, une pop-up demande
leur accord. En cas de refus, la page est désactivée. Sinon, le
répondant est invité à sélectionner sa zone d’habitation avant d’être
redirigé vers le questionnaire.</p>
<p>Jusqu’à présent, le texte est en <em>lorem ipsum</em>. Il s’agit d’un
texte illustratif.</p>
<p>Il existe deux façons de le modifier :</p>
<ul>
<li><p>Dans le dossier <code>inst/templates/html_survey</code>, le
fichier <code>script.js</code> contient le code pour modifier ce texte.
Il s’agit du fichier “générique” qui sera copié/collé dans l’ensemble
des futurs dossiers des villes.</p></li>
<li><p>Il est également possible de modifier le texte directement dans
le dossier d’une ville. Par exemple, lors de la création d’une enquête
pour Lille, un dossier <code>lille</code> sera ajouté dans
<code>dev</code>. Lors de la création du questionnaire, un dossier
<code>survey</code> est ajouté avec une copie du fichier
<code>script.js</code>. Il est possible de modifier ce fichier dans le
dossier <code>dev/lille/survey</code>. Le texte sera alors modifié pour
Lille uniquement.</p></li>
</ul>
</div>
<div class="section level2">
<h2 id="comment-gérer-la-redirection-vers-une-infographie-à-lissue-de-mon-questionnaire-limesurvey">Comment gérer la redirection vers une infographie à l’issue de mon
questionnaire Limesurvey ?<a class="anchor" aria-label="anchor" href="#comment-g%C3%A9rer-la-redirection-vers-une-infographie-%C3%A0-lissue-de-mon-questionnaire-limesurvey"></a>
</h2>
<p>Dans LimeSurvey, pour ajouter à la fin du questionnaire, une
redirection vers une infographie, il faut se rendre sur l’onglet
<code>Éléments de texte</code> dans la barre de menu latérale.</p>
<p><img src="../reference/figures/lime_survey_elements_text.png" style="width:100.0%"></p>
<p>Il faut ensuite modifier le <code>message de fin</code>.</p>
<p>Par défaut, la page de fin dans LimeSurvey est très “discrete”.</p>
<p>Afin de produire une - belle page - avec un bouton de redirection, il
est recommandé de modifier le message de fin en cliquant sur l’icône
<code>Source</code>, puis d’ajouter :</p>
<pre><code>&lt;meta charset="UTF-8"&gt;&lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
&lt;title&gt;&lt;/title&gt;
&lt;style type="text/css"&gt;.container {
            text-align: center;
            margin-top: 50px;
        }
        .thank-you-message {
            font-size: 24px;
            margin-bottom: 20px;
        }
        .redirect-link {
            background-color: #4CAF50;
            color: white;
            padding: 15px 32px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 16px;
            margin: 4px 2px;
            cursor: pointer;
            border: none;
            border-radius: 4px;
        }
        .redirect-link:hover {
            background-color: #45a049;
            color: white;
        }
&lt;/style&gt;
&lt;div class="container"&gt;
&lt;div class="thank-you-message"&gt;Merci pour votre participation !&lt;/div&gt;
&lt;a class="redirect-link" href="https://arthurdata.github.io/info-lille"&gt;Voir l'infographie&lt;/a&gt;&lt;/div&gt;
</code></pre>
<p><img src="../reference/figures/limesuvey_edit_end_message.png" style="width:100.0%"><strong>Attention</strong>: La dernière ligne du
code précédent contient l’url de redirection.</p>
<p>Il faudra modifier
<code>href="https://arthurdata.github.io/info-lille"</code> par la
nouvelle url :</p>
<pre><code>&lt;a class="redirect-link" href="nouvelleurl"&gt;Voir l'infographie&lt;/a&gt;&lt;/div&gt;</code></pre>
<p>Cela permet de générer une belle page de fin :</p>
<p><img src="../reference/figures/limesurvey_end_message.png" style="width:100.0%"></p>
</div>
<div class="section level2">
<h2 id="comment-ajouter-la-position-dans-une-url">Comment ajouter la position dans une URL ?<a class="anchor" aria-label="anchor" href="#comment-ajouter-la-position-dans-une-url"></a>
</h2>
<div class="section level3">
<h3 id="dans-limesurvey">Dans LimeSurvey<a class="anchor" aria-label="anchor" href="#dans-limesurvey"></a>
</h3>
<p>Par défaut, l’information de la position n’existe pas dans une url
LimeSurvey.</p>
<p>Pour celà, il faut modifier le fonctionnement du formulaire.</p>
<p>Dans l’onglet <code>Paramètre d'URL</code> sur LimeSurvey, cliquer
sur <code>Ajouter un paramlètre d'URL</code>.</p>
<p><img src="../reference/figures/limesurvey_add_params_urls.png" style="width:100.0%"></p>
<p>Il faut ensuite créer le paramètre <code>position</code> :</p>
<p><img src="../reference/figures/limesurvey_create_position.png" style="width:100.0%"></p>
</div>
<div class="section level3">
<h3 id="dans-typeform">Dans Typeform<a class="anchor" aria-label="anchor" href="#dans-typeform"></a>
</h3>
<p>Par défaut, l’information de la position n’existe pas dans une url
Typeform. Pour celà, il faut modifier le fonctionnement du
formulaire.</p>
<p>Dans l’onglet <code>Create</code> sur Typeform, se déplacer dans la
partie <code>Logic</code>.</p>
<p><img src="../reference/figures/typeform_1.png" style="width:100.0%"></p>
<p>Il faut ensuite ajouter une variable cachée (<em>hidden fields</em>)
:</p>
<p><img src="../reference/figures/typeform_2.png" style="width:100.0%"></p>
<p>Il est possible d’ajouter à ce moment l’information de la position
dans l’url :</p>
<p><img src="../reference/figures/typeform_3.png" style="width:100.0%"></p>
</div>
</div>
<div class="section level2">
<h2 id="comment-déployer-une-infographie-à-la-fin-du-questionnaire">Comment déployer une infographie à la fin du questionnaire<a class="anchor" aria-label="anchor" href="#comment-d%C3%A9ployer-une-infographie-%C3%A0-la-fin-du-questionnaire"></a>
</h2>
<p>Une fois le questionnaire répondu, le participant est invité à
consulter une page d’infographie qui doit présenter des données
globales.</p>
<p>Un fichier “template” est disponible ici :
<code>inst/templates/infographies</code>.</p>
<p>Téléchargez le contenu du dossier :</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/browseURL.html" class="external-link">browseURL</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span></span>
<span>    <span class="st">"templates"</span>, <span class="st">"infographie"</span>,</span>
<span>    package <span class="op">=</span> <span class="st">"nature"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Une fois téléchargé, il faut modifier le contenu du fichier
<code>index.qmd</code> avec le contenu souhaité.</p>
<p>Enfin, pour rendre disponible et consultable cette infographie :</p>
<ol style="list-style-type: decimal">
<li><p><code>Render</code> le fichier <code>index.qmd</code> afin
d’obtenir un fichier <code>index.html</code></p></li>
<li><p>Suivre les étapes de la vignette
<code>Créer et versionner un dossier avec Github</code> jusqu’à la
partie “Déployer avec Github”</p></li>
<li><p>Utiliser l’url de Github comme redirection vers une infographie à
l’issue de mon questionnaire Limesurvey (voir plus haut dans cette
faq)</p></li>
</ol>
</div>
<div class="section level2">
<h2 id="comment-modifier-le-thème-du-rapport">Comment modifier le thème du rapport ?<a class="anchor" aria-label="anchor" href="#comment-modifier-le-th%C3%A8me-du-rapport"></a>
</h2>
<p>Quarto permet de modifier le thème utilisé dans le rapport.</p>
<p>Dans l’en-tête suivante :</p>
<pre><code>title: "Bien-être et végétalisation"
format:
  html:
    self-contained: true
    toc: true
    toc-expand: 2
    toc-title: Naviguer dans le rapport
    theme: 
      - flatly
      - custom.scss
execute:
  echo: false
params:
  city: Créteil
---</code></pre>
<p>Le paramètre <code>toc: true</code> permet l’affichage d’une table
des matières jusqu’à une profondeur de niveau 2
<code>toc-expand: 2</code>. C’est à dire jusqu’aux titres de niveau 2
(ex : ## Titre niveau 2).</p>
<p>Le thème du rapport peut également être modifié à partir de
<code>theme</code> et en sélectionnant le thème depuis Bootswatch : <a href="https://bootswatch.com/" class="external-link">https://bootswatch.com/</a>.</p>
<p>Plus d’informations sont dispo ici :</p>
<p><a href="https://quarto.org/docs/output-formats/html-themes.html" class="external-link uri">https://quarto.org/docs/output-formats/html-themes.html</a></p>
<p>Le thème par défaut Flatly est modifié par le fichier
<code>custom.scss</code> qui permet de modifier la couleur du thème,
etc…</p>
<p>Pour modifier les couleurs des titres, cela se passe à la fin du
fichier.</p>
<p>h1 signifie un titre de niveau 1 h2 signifie un titre de niveau 2</p>
<pre><code>h1, h4, h5, h6 {
  color: $primary;
  font-family: $mulish;
}

h2, h3 {
  color: $tertiary;
  font-family: $mulish;
}</code></pre>
</div>
<div class="section level2">
<h2 id="comment-intégrer-les-données-issues-du-questionnaire-dune-ville">Comment intégrer les données issues du questionnaire d’une ville
?<a class="anchor" aria-label="anchor" href="#comment-int%C3%A9grer-les-donn%C3%A9es-issues-du-questionnaire-dune-ville"></a>
</h2>
<p>Afin d’analyser et d’utiliser les données issues d’un questionnaire,
pour une ville, nous recommandons de :</p>
<ul>
<li><p>Dans le dossier de la ville, placez le jeu de données (Excel ou
csv) dans <code>Report</code>,</p></li>
<li><p>Lire les données avec la fonction adéquate,</p></li>
<li><p>Modifier le script de <code>data_for_map_preparation.qmd</code>
afin d’utiliser ces données</p></li>
</ul>
</div>
<div class="section level2">
<h2 id="comment-mettre-à-jour-le-fichier-national-ou-mettre-des-données-dans-le-package">Comment mettre à jour le fichier national (ou mettre des données
dans le package) ?<a class="anchor" aria-label="anchor" href="#comment-mettre-%C3%A0-jour-le-fichier-national-ou-mettre-des-donn%C3%A9es-dans-le-package"></a>
</h2>
<p>Tout se passe dans le dossier <code>data-raw</code>.</p>
<p>Ce dossier contient :</p>
<ul>
<li><p>les données brutes (non transformées en format
<code>rda</code>),</p></li>
<li><p>le script R pour - justement - les transformer au format
<code>rda</code>. Dans l’idée, toutes les données brutes possède un
fichier R pour les transformer au format <code>rda</code>.</p></li>
</ul>
<p>Le code <code>usethis::use_data</code> permet de générer le fichier
<code>rda</code>.</p>
<p>Une fois générées les données au format <code>rda</code> doivent être
documentées.</p>
<p>Finalement, pour modifier les données : il faut changer le fichier
brut qui contient les données + relancer le script.</p>
</div>
<div class="section level2">
<h2 id="comment-modifier-la-couleur-dune-carte">Comment modifier la couleur d’une carte ?<a class="anchor" aria-label="anchor" href="#comment-modifier-la-couleur-dune-carte"></a>
</h2>
<p>Cela se passe dans le fichier
<code>data_for_map_preparation.qmd</code> :</p>
<p>A l’intérieur de ce fichier, tu as un code qui ressemble à ça :</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bins</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">5</span>, by <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="va">my_palette_bien_etre</span> <span class="op">&lt;-</span> <span class="fu">colorBin</span><span class="op">(</span></span>
<span>  palette <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"#f7d6e6"</span>, <span class="st">"#efadce"</span>, <span class="st">"#e685b5"</span>, <span class="st">"#cd568a"</span>, <span class="st">"#C12C6D"</span>, <span class="st">"#ab296a"</span>, <span class="st">"#801f4f"</span>,<span class="st">"#561435"</span>, <span class="st">"#2b0a1a"</span> <span class="op">)</span>,</span>
<span>  domain <span class="op">=</span> <span class="va">bins</span>, </span>
<span>  bins <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">bins</span><span class="op">)</span> <span class="op">-</span> <span class="fl">1</span>, </span>
<span>  na.color <span class="op">=</span> <span class="st">"transparent"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">my_palette_nature</span> <span class="op">&lt;-</span> <span class="fu">colorBin</span><span class="op">(</span></span>
<span>  palette <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"#dff1df"</span>,<span class="st">"#c0e4bf"</span>, <span class="st">"#a0d79f"</span>, <span class="st">"#81ca7f"</span>, <span class="st">"#62BD60"</span>, <span class="st">"#4e974c"</span>,<span class="st">"#3a7139"</span>, <span class="st">"#274b26"</span>, <span class="st">"#132513"</span> <span class="op">)</span>,</span>
<span>  domain <span class="op">=</span> <span class="va">bins</span>, </span>
<span>  bins <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">bins</span><span class="op">)</span> <span class="op">-</span> <span class="fl">1</span>, </span>
<span>  na.color <span class="op">=</span> <span class="st">"transparent"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">bins2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span>, by <span class="op">=</span> <span class="fl">0.15</span><span class="op">)</span></span>
<span></span>
<span><span class="va">my_palette_ratio</span> <span class="op">&lt;-</span> <span class="fu">colorBin</span><span class="op">(</span></span>
<span>  palette <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"#e8eef8"</span>,<span class="st">"#a4bbe4"</span>,<span class="st">"#769ad6"</span>, <span class="st">"#4978c9"</span>,<span class="st">"#1C57BC"</span>, <span class="st">"#194ea9"</span>,<span class="st">"#133C83"</span>, <span class="st">"#0e2b5e"</span>,<span class="st">"#081a38"</span><span class="op">)</span>, </span>
<span>  domain <span class="op">=</span> <span class="va">bins2</span>, </span>
<span>  bins <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">bins2</span><span class="op">)</span> <span class="op">-</span> <span class="fl">1</span>, </span>
<span>  na.color <span class="op">=</span> <span class="st">"transparent"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Tu peux modifier manuellement les couleurs utilisées par les
palettes.</p>
<p>Ensuite, tu dois calculer la couleur associée à ton critère. Cela se
passe dans le code qui suit :</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">city_hex_l93_intersection_dataset</span> <span class="op">&lt;-</span> <span class="va">city_hex_l93_intersection</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">left_join</span><span class="op">(</span><span class="va">dataset_group_by_localisation</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"id"</span> <span class="op">=</span> <span class="st">"Localisation"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span></span>
<span>    <span class="fu">across</span><span class="op">(</span></span>
<span>      <span class="fu">contains</span><span class="op">(</span><span class="st">"critere"</span><span class="op">)</span>,</span>
<span>      <span class="op">~</span> <span class="fu">my_palette_nature</span><span class="op">(</span><span class="va">.x</span><span class="op">)</span>,</span>
<span>      .names <span class="op">=</span> <span class="st">"{.col}_color"</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="fu">across</span><span class="op">(</span></span>
<span>      <span class="fu">contains</span><span class="op">(</span><span class="st">"critere"</span><span class="op">)</span> <span class="op">&amp;</span> <span class="fu">contains</span><span class="op">(</span><span class="st">"bien_etre"</span><span class="op">)</span> <span class="op">&amp;</span> <span class="op">-</span><span class="fu">contains</span><span class="op">(</span><span class="st">"color"</span><span class="op">)</span>,</span>
<span>      <span class="op">~</span> <span class="fu">my_palette_bien_etre</span><span class="op">(</span><span class="va">.x</span><span class="op">)</span>,</span>
<span>      .names <span class="op">=</span> <span class="st">"{.col}_color"</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="fu">across</span><span class="op">(</span></span>
<span>      <span class="va">critere_ratio_bien_etre_nature</span>,</span>
<span>      <span class="op">~</span> <span class="fu">my_palette_ratio</span><span class="op">(</span><span class="va">.x</span><span class="op">)</span>,</span>
<span>      .names <span class="op">=</span> <span class="st">"{.col}_color"</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p>Dans ce code, la palette <code>my_palette_bien_etre</code> est
utulisée pour les critères de bien-être et la palette
<code>my_palette_nature</code> est utilisée les critères de nature et
<code>my_palette_ratio</code> pour le ratio de bien-être nature.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Vincent Guyader, Arthur Bréant.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
